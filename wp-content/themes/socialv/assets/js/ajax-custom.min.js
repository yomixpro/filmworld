"use strict";if("undefined"==typeof iqSearchInputs)for(var _iqSearchInputs=document.getElementsByClassName("ajax_search_input"),ind=0;ind<_iqSearchInputs.length;ind++){var element=_iqSearchInputs[ind];element.addEventListener("keyup",function(e){getAjaxSearch(e)})}var getAjaxSearch=_.debounce(function(e){var s,t,r=e.target,e=r.value;3<e.length?(r.closest(".header-search").querySelector(".socialv-search-result").classList.remove("search-result-dislogbox"),(s=new FormData).append("action","ajax_search_member"),s.append("keyword",e),(t=new XMLHttpRequest).open("POST",socialv_loadmore_params.ajaxurl,!0),t.onload=function(){var e;200<=this.status&&this.status<400?(e=JSON.parse(this.response).data,r.closest(".header-search").querySelector(".socialv-search-member-content").innerHTML=e):r.closest(".header-search").querySelector(".socialv-search-member-content").innerHTML=""},t.onerror=function(){r.closest(".header-search").querySelector(".socialv-search-member-content").innerHTML=""},t.onprogress=function(){r.closest(".header-search").querySelector(".socialv-search-member-content").innerHTML='<li><span class="socialv-loader"></span></li>'},t.send(s),s.append("action","ajax_search_group"),s.append("keyword",e),(t=new XMLHttpRequest).open("POST",socialv_loadmore_params.ajaxurl,!0),t.onload=function(){var e;200<=this.status&&this.status<400?(e=JSON.parse(this.response).data,r.closest(".header-search").querySelector(".socialv-search-group-content").innerHTML=e):r.closest(".header-search").querySelector(".socialv-search-group-content").innerHTML=""},t.onprogress=function(){r.closest(".header-search").querySelector(".socialv-search-group-content").innerHTML='<li><span class="socialv-loader"></span></li>'},t.onerror=function(){r.closest(".header-search").querySelector(".socialv-search-group-content").innerHTML=""},t.send(s),s.append("action","ajax_search_post"),s.append("keyword",e),(t=new XMLHttpRequest).open("POST",socialv_loadmore_params.ajaxurl,!0),t.onload=function(){var e;200<=this.status&&this.status<400?(e=JSON.parse(this.response).data,r.closest(".header-search").querySelector(".socialv-search-post-content").innerHTML=e):r.closest(".header-search").querySelector(".socialv-search-post-content").innerHTML=""},t.onprogress=function(){r.closest(".header-search").querySelector(".socialv-search-post-content").innerHTML='<li><span class="socialv-loader"></span></li>'},t.onerror=function(){r.closest(".header-search").querySelector(".socialv-search-post-content").innerHTML=""},t.send(s),s.append("action","ajax_search_product"),s.append("keyword",e),(t=new XMLHttpRequest).open("POST",socialv_loadmore_params.ajaxurl,!0),t.onload=function(){var e;200<=this.status&&this.status<400?(e=JSON.parse(this.response).data,r.closest(".header-search").querySelector(".socialv-search-product-content").innerHTML=e):r.closest(".header-search").querySelector(".socialv-search-product-content").innerHTML=""},t.onprogress=function(){r.closest(".header-search").querySelector(".socialv-search-product-content").innerHTML='<li><span class="socialv-loader"></span></li>'},t.onerror=function(){r.closest(".header-search").querySelector(".socialv-search-product-content").innerHTML=""},t.send(s),s.append("action","ajax_search_course"),s.append("keyword",e),(t=new XMLHttpRequest).open("POST",socialv_loadmore_params.ajaxurl,!0),t.onload=function(){var e;200<=this.status&&this.status<400?(e=JSON.parse(this.response).data,r.closest(".header-search").querySelector(".socialv-search-course-content").innerHTML=e):r.closest(".header-search").querySelector(".socialv-search-course-content").innerHTML=""},t.onprogress=function(){r.closest(".header-search").querySelector(".socialv-search-course-content").innerHTML='<li><span class="socialv-loader"></span></li>'},t.onerror=function(){r.closest(".header-search").querySelector(".socialv-search-course-content").innerHTML=""},t.send(s)):r.closest(".header-search").querySelector(".socialv-search-result").classList.add("search-result-dislogbox")},500);document.addEventListener("DOMContentLoaded",function(){var s=document.querySelector(".socialv-search-result");document.addEventListener("click",function(e){e=e.target;s.contains(e)||s.classList.add("search-result-dislogbox")})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".socialv-friendship-btn").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=this,e=t.getAttribute("data-friendship-id"),s=t.classList.contains("accept")?"friends_accept_friendship":"friends_reject_friendship",r=new XMLHttpRequest;return r.open("POST",ajaxurl),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){var e,s;r.readyState===XMLHttpRequest.DONE&&(200===r.status?(s=(e=JSON.parse(r.responseText)).data.feedback,t.closest(".socialv-friend-request").querySelector(".response").innerHTML=s,e.success&&t.closest(".request-button").remove(),(s=document.getElementById("notify-count"))&&(1<(e=parseInt(s.textContent))?s.textContent=e-1:(s.textContent="",s.classList.remove("notify-count")))):console.error("An error occurred during the AJAX request."))},r.send("action=socialv_ajax_addremove_friend&friendship_id="+e+"&data_action="+s),!1})})}),document.addEventListener("click",function(e){e.target.closest(".btn-dropdown")&&document.querySelectorAll(".sharing-options").forEach(function(e){e.classList.remove("open")}),e.target.closest(".socialv-header-right .dropdown-toggle")&&document.querySelector(".socialv-search-result").classList.add("search-result-dislogbox")}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".socialv-share-post .share-btn").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();e=this.parentElement.querySelector(".sharing-options");e&&(e.classList.contains("open")?document.querySelectorAll(".sharing-options").forEach(function(e){e.classList.remove("open")}):(document.querySelectorAll(".sharing-options").forEach(function(e){e.classList.remove("open")}),e.classList.add("open")))})})}),document.addEventListener("click",function(e){var s,t;e.target.matches("a.share_activity-share")&&(e.preventDefault(),e=(s=e.target).getAttribute("href"),(t=new XMLHttpRequest).open("POST",ajaxurl),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onload=function(){200===t.status&&(t.responseText&&(s.closest(".socialv-share-post").querySelector(".share-btn .share_icon").innerHTML='<i class="icon-circle-check"></i>'),setTimeout(function(){s.closest(".socialv-share-post").querySelector(".share-btn .share_icon").innerHTML='<i class="icon-share"></i>'},3e3))},t.send("action=socialv_post_share_activity&activity_id="+encodeURIComponent(e)),s.closest(".sharing-options").classList.remove("open"),s.closest(".socialv-share-post").querySelector(".share-btn .share_icon").innerHTML='<i class="icon-loader-circle"></i>')});